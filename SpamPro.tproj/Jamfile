# Copyright (c) 1999 Apple Computer, Inc.  All rights reserved.
# $Id: Jamfile,v 1.7 2001/03/08 17:42:49 serenyi Exp $


#
# Compiler definitions and flags
CC = cc ;
C++ = c++ ;
LINK = c++ ;
MIG = mig ;

CCFLAGS += -D__MacOSX__ -DNeXT -arch ppc -Wall  -include ../PlatformHeader.h -include ../revision.h -Wredundant-decls -Wcast-qual -Wno-four-char-constants -fcommon ;

FRAMEWORKS = -framework Foundation -framework Carbon ;

CCFLAGS += -g ;
C++FLAGS = $(CCFLAGS) ;

#
# Optimization flags
OPTIM = -O0 ;


#
# Where our headers are located
HDRS = ..
		.
		../OSMemoryLib
		../APICommonCode
		../APIStubLib
		../CommonUtilitiesLib
		../RTCPUtilitiesLib
		../PrefsSourceLib
		../RTSPClientLib
		../RTPMetaInfoLib
		;

#
# Our source files
CFILES = 
			../CommonUtilitiesLib/base64.c
			../CommonUtilitiesLib/GetWord.c
			../CommonUtilitiesLib/Trim.c
			../CommonUtilitiesLib/md5.c
#			../CommonUtilitiesLib/mycondition.c
#			../CommonUtilitiesLib/mymutex.c
		 ;
		 
CPPFILES =

# SERVER SOURCES

	SpamPro.cpp
		
# COMMON UTILITIES

	../CommonUtilitiesLib/EventContext.cpp
	#../CommonUtilitiesLib/Exception.cpp
	../CommonUtilitiesLib/IdleTask.cpp
	../CommonUtilitiesLib/MyAssert.cpp
	../CommonUtilitiesLib/OS.cpp
	../CommonUtilitiesLib/OSCodeFragment.cpp
	../CommonUtilitiesLib/OSCond.cpp
	../CommonUtilitiesLib/OSFileSource.cpp
	../CommonUtilitiesLib/OSHeap.cpp
	../CommonUtilitiesLib/OSMutex.cpp
	../CommonUtilitiesLib/OSBufferPool.cpp
	../CommonUtilitiesLib/OSMutexRW.cpp
	../CommonUtilitiesLib/OSQueue.cpp
	../CommonUtilitiesLib/OSRef.cpp
	../CommonUtilitiesLib/OSThread.cpp
	../CommonUtilitiesLib/Socket.cpp
	../CommonUtilitiesLib/SocketUtils.cpp
	../CommonUtilitiesLib/ResizeableStringFormatter.cpp
	../CommonUtilitiesLib/StringFormatter.cpp
	../CommonUtilitiesLib/StringParser.cpp
	../CommonUtilitiesLib/StringTranslator.cpp
	../CommonUtilitiesLib/StrPtrLen.cpp
	../CommonUtilitiesLib/Task.cpp
	../CommonUtilitiesLib/TCPListenerSocket.cpp
	../CommonUtilitiesLib/TCPSocket.cpp
	../CommonUtilitiesLib/TimeoutTask.cpp
	../CommonUtilitiesLib/UDPDemuxer.cpp
	../CommonUtilitiesLib/UDPSocket.cpp
	../CommonUtilitiesLib/UDPSocketPool.cpp
	../CommonUtilitiesLib/UserAgentParser.cpp
	../CommonUtilitiesLib/DateTranslator.cpp
	../CommonUtilitiesLib/ConfParser.cpp
	../CommonUtilitiesLib/mycondition.cpp
	../CommonUtilitiesLib/mymutex.cpp
	../CommonUtilitiesLib/md5digest.cpp

# PREFS SOURCE LIB

	../PrefsSourceLib/FilePrefsSource.cpp	

# OSMEMORY LIB

	../OSMemoryLib/OSMemory.cpp
	
# RTSPCLIENT LIB

	../RTSPClientLib/RTSPClient.cpp
	../RTSPClientLib/ClientSocket.cpp
	../RTSPClientLib/ClientSession.cpp

# API MODULES / API COMMON CODE

	../APICommonCode/SDPSourceInfo.cpp
	../APICommonCode/SourceInfo.cpp
	
# RTP META INFO STUFF

	../RTPMetaInfoLib/RTPMetaInfoPacket.cpp
;

#
# Our libraries
LIBS = atomic ;


#
# Build all of the objects
Objects $(DEFS) $(CFILES) $(CPPFILES) ;

#
# Link the StreamingLoadTool
MainFromObjects StreamingLoadTool : $(CFILES:S=.o) $(CPPFILES:S=.o) ;
LinkLibraries StreamingLoadTool : ../lib$(LIBS) ;
LINKFLAGS on StreamingLoadTool += $(FRAMEWORKS) ;
